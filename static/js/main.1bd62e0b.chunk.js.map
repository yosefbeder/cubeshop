{"version":3,"sources":["pages/checkout/containers/Summary/Summary.module.css","common/containers/Navbar/NavLink.tsx","common/components/IconButton.tsx","common/containers/Navbar/MenIcon.tsx","common/components/LoadingSpinner.tsx","common/components/Button.tsx","utils/numbers.ts","common/containers/Bag/BagItem.tsx","api/commerce.ts","hooks/redux.ts","store/bag.ts","common/containers/Bag/Bag.tsx","common/components/Logo.tsx","common/containers/Navbar/Navbar.tsx","common/components/IconLink.tsx","common/containers/Footer/Footer.tsx","common/containers/Layout/index.tsx","pages/shop/containers/ProductsList/Product.tsx","pages/shop/containers/ProductsList/ProductsList.tsx","pages/shop/index.tsx","common/components/Input.tsx","pages/checkout/containers/Form/Form.tsx","pages/checkout/containers/Summary/SummaryItem.tsx","pages/checkout/containers/Summary/Summary.tsx","pages/checkout/index.tsx","common/containers/NotAvailable/index.tsx","pages/home/index.tsx","pages/about/index.tsx","pages/contact/index.tsx","store/products.ts","pages/product/index.tsx","routes.ts","pages/NotFound/index.tsx","App.tsx","store/index.ts","index.tsx","common/containers/Navbar/Navbar.module.css","pages/checkout/containers/Form/Form.module.css","pages/product/product.module.css","common/containers/Bag/Bag.module.css","pages/shop/shop.module.css","common/containers/Bag/BagItem.module.css","common/containers/Footer/Footer.module.css","pages/shop/containers/ProductsList/Product.module.css","pages/checkout/checkout.module.css"],"names":["module","exports","NavLink","to","content","size","exact","className","classes","activeClassName","data-hover","IconButton","props","children","variant","buttonElProps","MenuIcon","isActive","LoadingSpinner","divElProps","Button","isLoading","disabled","formatPriceEGP","symbol","price","toFixed","bind","BagItem","imgSrc","name","quantity","available","onRemove","onQuantityChange","useState","setIsLoading","isUnmounted","setIsUnmounted","useEffect","quantityChangeHandler","change","a","alert","Error","container","img","src","alt","info","actions","onClick","commerce","Commerce","process","getAllProducts","products","list","data","map","id","assets","description","raw","inventory","imgSrcs","asset","url","replace","getBag","cart","retrieve","request","bagItems","line_items","item","find","product","product_id","productId","subtotal","items","useAppDispatch","useDispatch","useAppSelector","useSelector","fetchBag","createAsyncThunk","slice","createSlice","initialState","status","isDisabled","reducers","add","state","action","push","payload","remove","i","findIndex","splice","changeQuantity","enableBag","disableBag","resetBag","extraReducers","builder","addCase","pending","fulfilled","rejected","Bag","onClose","history","useHistory","dispatch","selectedProduct","bag","onContinueShopping","length","header","itemProps","bagActions","update","Logo","navLinksData","MobileNavbar","navLinkData","index","Navbar","mobileNavbarIsShown","setMobileNavbarIsShown","isBagShown","setIsBagShown","closeBag","bagContainerRef","useRef","bagRef","onClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","nav","prev","ref","CSSTransition","classNames","nodeRef","timeout","in","unmountOnExit","mountOnEnter","IconLink","href","title","rel","footerSections","icon","IoLocationOutline","link","IoCallOutline","IoMailOutline","socialAccounts","FacebookLogo","TwitterLogo","GithubLogo","FooterSection","Icon","Footer","footerSection","linkProps","Layout","Product","onAddToBag","ProductsList","itemId","productProps","bagItem","line_item_id","Shop","main","p","Input","React","forwardRef","hasError","inputElProps","getStripeInputOptions","fullWidth","invalid","focus","base","Form","formMethods","isLoaded","isCapturingOrder","subdivisions","subdivision","onSubdivisionChagne","shippingOptions","shippingOption","onShippingOptionChange","onSubmit","register","handleSubmit","errors","formState","required","Boolean","firstName","placeholder","lastName","pattern","email","address","city","options","value","onChange","theme","colors","neutral20","primary","maxLength","minLength","validate","n","Number","isNaN","postalCode","phoneNumber","type","SummaryItem","Summary","delivery","undefined","stripePromise","loadStripe","country","Checkout","bagIsLoaded","checkoutTokenId","setCheckoutTokenId","setIsLoaded","setIsCapturingOrder","useForm","setSubdivision","setSubdivisions","setShippingOption","setShippingOptions","onFormSubmit","stripe","elements","forEach","checkout","capture","customer","firstname","lastname","phone","shipping","street","town_city","county_state","postal_zip_code","fulfillment","shipping_method","payment","gateway","card","number","expiry_month","expiry_year","cvc","generateToken","checkoutToken","Object","services","localeListSubdivisions","entries","code","label","shipping_methods","selectedValue","NotAvailable","style","width","margin","padding","fetchProducts","setSelectedProduct","console","log","homepage","routes","path","component","Home","paramsId","useParams","productIndex","quantityInBag","selectedImg","setSelectedImg","setQuantity","isAddingToBag","setIsAddingToBag","productsActions","localStorage","getItem","inFavorite","setInFavorite","key","inLocalStorage","setItem","removeItem","isCopied","setIsCopied","details","dangerouslySetInnerHTML","__html","color","onCopy","text","e","min","max","About","Contact","NotFound","App","productsIsLoaded","route","store","configureStore","reducer","productsReducer","bagReducer","ReactDOM","render","StrictMode","basename","getElementById"],"mappings":"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","file":"static/js/main.1bd62e0b.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Summary_container__2wMoz\",\"header\":\"Summary_header__3HtAp\",\"summary-items-list\":\"Summary_summary-items-list__2fh7E\",\"summary-item\":\"Summary_summary-item__1Fd2b\",\"summary-item__img\":\"Summary_summary-item__img__1-oOh\",\"summary-item__p\":\"Summary_summary-item__p__3rOcx\",\"summary-item__price\":\"Summary_summary-item__price__38JW0\",\"price-summary\":\"Summary_price-summary__1GvCk\",\"price-summary__group\":\"Summary_price-summary__group__1L0-R\",\"price-summary__group--sm\":\"Summary_price-summary__group--sm__2Edfb\",\"price-summary__group--lg\":\"Summary_price-summary__group--lg__2x7sO\"};","import React from 'react';\r\nimport { NavLink as Link } from 'react-router-dom';\r\nimport classes from './Navbar.module.css';\r\n\r\ninterface NavLinkProps {\r\n  to: string;\r\n  content: string;\r\n  size?: 'sm' | 'med' | 'lg';\r\n}\r\n\r\nconst NavLink: React.FC<NavLinkProps> = ({ to, content, size = 'med' }) => {\r\n  return (\r\n    <Link\r\n      to={to}\r\n      exact={to === '/'}\r\n      className={`${classes['nav-link']} ${classes[`nav-link--${size}`]}`}\r\n      activeClassName={classes['nav-link--active']}\r\n      data-hover={content}\r\n    >\r\n      {content}\r\n    </Link>\r\n  );\r\n};\r\n\r\nexport default NavLink;\r\n","import React from 'react';\r\n\r\ninterface IconButtonProps {\r\n  variant: 'primary' | 'secondary' | 'tertiary' | 'quaternary';\r\n}\r\n\r\nconst IconButton: React.FC<\r\n  IconButtonProps & React.ButtonHTMLAttributes<HTMLButtonElement>\r\n> = props => {\r\n  const { children, className, variant, ...buttonElProps } = props;\r\n\r\n  return (\r\n    <button\r\n      {...buttonElProps}\r\n      className={`icon-button icon-button--${variant} ${className}`}\r\n    >\r\n      {children}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default IconButton;\r\n","import React from 'react';\r\nimport classes from './Navbar.module.css';\r\n\r\ninterface MenuIconProps {\r\n  isActive: boolean;\r\n}\r\n\r\nconst MenuIcon: React.FC<MenuIconProps> = ({ isActive }) => {\r\n  return (\r\n    <div\r\n      className={`${classes['menu-icon']} ${\r\n        isActive && classes['menu-icon--active']\r\n      }`}\r\n    >\r\n      <div className={classes['menu-icon__bar']} />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MenuIcon;\r\n","import React from 'react';\r\n\r\ninterface LoadingSpinnerProps {\r\n  size?: 'sm' | 'med' | 'lg';\r\n}\r\n\r\nconst LoadingSpinner: React.FC<\r\n  LoadingSpinnerProps &\r\n    React.DetailedHTMLProps<\r\n      React.HTMLAttributes<HTMLDivElement>,\r\n      HTMLDivElement\r\n    >\r\n> = props => {\r\n  const { className, size = 'med', ...divElProps } = props;\r\n\r\n  return (\r\n    <div\r\n      className={`loading-spinner loading-spinner--${size} ${className}`}\r\n      {...divElProps}\r\n    />\r\n  );\r\n};\r\n\r\nexport default LoadingSpinner;\r\n","import React, { ButtonHTMLAttributes } from 'react';\r\nimport LoadingSpinner from './LoadingSpinner';\r\n\r\ninterface ButtonProps {\r\n  children: string;\r\n  variant?: 'contained' | 'outlined';\r\n  isLoading?: boolean;\r\n}\r\n\r\nconst Button: React.FC<ButtonProps & ButtonHTMLAttributes<HTMLButtonElement>> =\r\n  props => {\r\n    const {\r\n      children,\r\n      variant = 'contained',\r\n      isLoading = false,\r\n      className,\r\n      disabled,\r\n      ...buttonElProps\r\n    } = props;\r\n\r\n    return (\r\n      <button\r\n        {...buttonElProps}\r\n        className={`button button--${variant} ${className}`}\r\n        disabled={isLoading || disabled}\r\n      >\r\n        {isLoading ? (\r\n          <LoadingSpinner className=\"button__loading-spinner\" />\r\n        ) : (\r\n          children\r\n        )}\r\n      </button>\r\n    );\r\n  };\r\n\r\nexport default Button;\r\n","const formatPrice = (symbol: string, price: number) =>\r\n  `${symbol}${price.toFixed(2)}`;\r\n\r\nexport const formatPriceEGP = formatPrice.bind(null, '£');\r\n","import React, { useState } from 'react';\r\nimport {\r\n  IoAddOutline as PlusIcon,\r\n  IoRemove as SubIcon,\r\n  IoTrashOutline as TrashIcon,\r\n} from 'react-icons/io5';\r\nimport { formatPriceEGP } from '../../../utils/numbers';\r\nimport classes from './BagItem.module.css';\r\nimport IconButton from '../../components/IconButton';\r\nimport LoadingSpinner from '../../components/LoadingSpinner';\r\nimport { useEffect } from 'react';\r\n\r\nexport interface BagItemProps {\r\n  imgSrc: string;\r\n  name: string;\r\n  price: number;\r\n  quantity: number;\r\n  available: number;\r\n  disabled: boolean;\r\n  onRemove: () => Promise<void>;\r\n  onQuantityChange: (change: number) => Promise<void>;\r\n}\r\n\r\nconst BagItem: React.FC<BagItemProps> = ({\r\n  imgSrc,\r\n  name,\r\n  price,\r\n  quantity,\r\n  available,\r\n  disabled,\r\n  onRemove,\r\n  onQuantityChange,\r\n}) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  const [isUnmounted, setIsUnmounted] = useState(false);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      setIsUnmounted(true);\r\n    };\r\n  }, []);\r\n\r\n  const quantityChangeHandler = async (change: number) => {\r\n    try {\r\n      setIsLoading(true);\r\n      await onQuantityChange(change);\r\n    } catch (err) {\r\n      alert(new Error('Something went wrong'));\r\n    }\r\n    if (!isUnmounted) setIsLoading(false);\r\n  };\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      {isLoading ? (\r\n        <LoadingSpinner size=\"lg\" />\r\n      ) : (\r\n        <img className={classes.img} src={imgSrc} alt={name} />\r\n      )}\r\n      <div className={classes.info}>\r\n        <span className=\"txt-primary\">{name}</span>\r\n        <span className=\"txt-emphasize\">{formatPriceEGP(price)}</span>\r\n      </div>\r\n      <div className={classes.actions}>\r\n        <div className={classes['quantity-controller']}>\r\n          <IconButton\r\n            variant=\"secondary\"\r\n            disabled={quantity === available || disabled || isLoading}\r\n            onClick={() => quantityChangeHandler(1)}\r\n          >\r\n            <PlusIcon />\r\n          </IconButton>\r\n          <span>{quantity}</span>\r\n          <IconButton\r\n            variant=\"secondary\"\r\n            disabled={quantity === 1 || disabled || isLoading}\r\n            onClick={() => quantityChangeHandler(-1)}\r\n          >\r\n            <SubIcon />\r\n          </IconButton>\r\n        </div>\r\n        <IconButton\r\n          variant=\"tertiary\"\r\n          onClick={async () => {\r\n            try {\r\n              setIsLoading(true);\r\n              await onRemove();\r\n            } catch (err) {\r\n              alert(new Error('Something went wrong'));\r\n            }\r\n            if (!isUnmounted) setIsLoading(false);\r\n          }}\r\n          disabled={disabled}\r\n        >\r\n          <TrashIcon />\r\n        </IconButton>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default BagItem;\r\n","import Commerce from '@chec/commerce.js';\r\nimport { BagItemType, BagType, ProductType } from '../types';\r\n\r\nconst checPublicKey = process.env.REACT_APP_CHEC_PUBLIC_KEY!;\r\n\r\nexport const commerce = new Commerce(checPublicKey);\r\n\r\n// PRODUCTS\r\nexport const getAllProducts = async (): Promise<ProductType[]> => {\r\n  const { data } = await commerce.products.list();\r\n\r\n  return data.map(\r\n    ({\r\n      id,\r\n      assets,\r\n      name,\r\n      description,\r\n      price: { raw: price },\r\n      inventory: { available },\r\n    }) => ({\r\n      id,\r\n      imgSrcs: assets.map(asset => asset.url),\r\n      name,\r\n      description: description\r\n        .replace(/<p>/g, '<p class=\"p-1\">')\r\n        .replace(/<\\/?ul>/g, ''),\r\n      price,\r\n      available,\r\n    }),\r\n  );\r\n};\r\n\r\n// BAG\r\nexport const getBag = async (products: ProductType[]): Promise<BagType> => {\r\n  const request = await commerce.cart.retrieve();\r\n\r\n  const bagItems: BagItemType[] = request.line_items.map(item => {\r\n    const {\r\n      id: productId,\r\n      name,\r\n      price,\r\n      available,\r\n      imgSrcs,\r\n    } = products.find(product => product.id === item.product_id)!;\r\n\r\n    return {\r\n      id: item.id,\r\n      productId,\r\n      name,\r\n      price,\r\n      available,\r\n      quantity: item.quantity,\r\n      imgSrc: imgSrcs[0],\r\n    };\r\n  });\r\n\r\n  return { id: request.id, subtotal: request.subtotal.raw, items: bagItems };\r\n};\r\n","import { TypedUseSelectorHook, useDispatch, useSelector } from 'react-redux';\r\nimport { RootState, AppDispatch } from '../store';\r\n\r\nexport const useAppDispatch = () => useDispatch<AppDispatch>();\r\nexport const useAppSelector: TypedUseSelectorHook<RootState> = useSelector;\r\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { getBag } from '../api/commerce';\r\nimport { BagItemType, BagType, ProductType, StatusType } from '../types';\r\n\r\nconst initialState: {\r\n  status: StatusType;\r\n  isDisabled: boolean;\r\n  data: null | BagType;\r\n} = {\r\n  status: 'loading',\r\n  isDisabled: false,\r\n  data: null,\r\n};\r\n\r\nexport const fetchBag = createAsyncThunk(\r\n  'fetchBag',\r\n  async (products: ProductType[]) => await getBag(products),\r\n);\r\n\r\nconst slice = createSlice({\r\n  name: 'bag',\r\n  initialState,\r\n  reducers: {\r\n    add(state, action: PayloadAction<BagItemType>) {\r\n      state.data!.items.push(action.payload);\r\n      state.data!.subtotal += action.payload.price;\r\n    },\r\n    remove(state, action: PayloadAction<string>) {\r\n      const i = state.data!.items.findIndex(item => item.id === action.payload);\r\n\r\n      state.data!.items.splice(i, 1);\r\n    },\r\n    changeQuantity(\r\n      state,\r\n      {\r\n        payload: { id, change },\r\n      }: PayloadAction<{ id: string; change: number }>,\r\n    ) {\r\n      const item = state.data!.items.find(item => item.id === id);\r\n\r\n      item!.quantity += change;\r\n      state.data!.subtotal += change * item!.price;\r\n    },\r\n    enableBag(state) {\r\n      state.isDisabled = false;\r\n    },\r\n    disableBag(state) {\r\n      state.isDisabled = true;\r\n    },\r\n    resetBag(state, action: PayloadAction<string>) {\r\n      state.data = {\r\n        id: action.payload,\r\n        items: [],\r\n        subtotal: 0,\r\n      };\r\n    },\r\n  },\r\n  extraReducers: builder => {\r\n    builder.addCase(fetchBag.pending, state => {\r\n      state.status = 'loading';\r\n    });\r\n    builder.addCase(fetchBag.fulfilled, (state, action) => {\r\n      state.data = action.payload;\r\n      state.status = 'loaded';\r\n    });\r\n    builder.addCase(fetchBag.rejected, state => {\r\n      state.status = 'failed';\r\n      state.data = null;\r\n    });\r\n  },\r\n});\r\n\r\nexport default slice.reducer;\r\nexport const actions = slice.actions;\r\n","import React from 'react';\r\nimport { IoClose } from 'react-icons/io5';\r\nimport IconButton from '../../components/IconButton';\r\nimport classes from './Bag.module.css';\r\nimport Button from '../../components/Button';\r\nimport BagItem from './BagItem';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { BagItemType } from '../../../types';\r\nimport { commerce } from '../../../api/commerce';\r\nimport { useAppDispatch, useAppSelector } from '../../../hooks/redux';\r\nimport { actions as bagActions } from '../../../store/bag';\r\nimport { formatPriceEGP } from '../../../utils/numbers';\r\n\r\ninterface BagProps {\r\n  items: BagItemType[];\r\n  subtotal: number;\r\n  onClose: () => void;\r\n  className?: string;\r\n}\r\n\r\nconst Bag: React.FC<BagProps> = ({ items, subtotal, onClose, className }) => {\r\n  const history = useHistory();\r\n  const dispatch = useAppDispatch();\r\n  const selectedProduct = useAppSelector(\r\n    state => state.products.selectedProduct,\r\n  );\r\n  const isDisabled = useAppSelector(state => state.bag.isDisabled);\r\n\r\n  const onContinueShopping = () => {\r\n    onClose();\r\n    history.push('/products');\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={`${classes.container} ${\r\n        items.length === 0 && classes['container--empty']\r\n      } ${className}`}\r\n    >\r\n      <div className={classes.header}>\r\n        <h3 className=\"header-3\">Your shopping bag</h3>\r\n        <IconButton onClick={onClose} variant=\"tertiary\">\r\n          <IoClose />\r\n        </IconButton>\r\n      </div>\r\n      <div>\r\n        {items.length === 0 ? (\r\n          <p className=\"p-1\">There's nothing in your bag yet.</p>\r\n        ) : (\r\n          items.map(({ id, productId, ...itemProps }) => (\r\n            <BagItem\r\n              key={id}\r\n              disabled={selectedProduct === productId || isDisabled}\r\n              {...itemProps}\r\n              onRemove={async () => {\r\n                await commerce.cart.remove(id);\r\n                dispatch(bagActions.remove(id));\r\n              }}\r\n              onQuantityChange={async (change: number) => {\r\n                await commerce.cart.update(id, {\r\n                  quantity: itemProps.quantity + change,\r\n                });\r\n                dispatch(bagActions.changeQuantity({ id, change }));\r\n              }}\r\n            />\r\n          ))\r\n        )}\r\n      </div>\r\n      {items.length > 0 && (\r\n        <div className={`txt-emphasize ${classes.subtotal}`}>\r\n          <span>Total price</span>\r\n          <span>{formatPriceEGP(subtotal)}</span>\r\n        </div>\r\n      )}\r\n      <div className={classes.actions}>\r\n        {items.length > 0 ? (\r\n          <>\r\n            <Button\r\n              className={classes['continue-shopping-btn']}\r\n              variant=\"outlined\"\r\n              onClick={onContinueShopping}\r\n            >\r\n              Continue shopping\r\n            </Button>\r\n\r\n            <Button\r\n              className={classes['checkout-btn']}\r\n              onClick={() => history.push('/checkout')}\r\n            >\r\n              Checkout\r\n            </Button>\r\n          </>\r\n        ) : (\r\n          <Button\r\n            className={classes['continue-shopping-btn']}\r\n            onClick={onContinueShopping}\r\n          >\r\n            Continue shopping\r\n          </Button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Bag;\r\n","import React from 'react';\r\n\r\nconst Logo = () => {\r\n  return <span className=\"logo\">Cube shop</span>;\r\n};\r\n\r\nexport default Logo;\r\n","import React, { useState, useEffect, useRef } from 'react';\r\nimport classes from './Navbar.module.css';\r\nimport NavLink from './NavLink';\r\nimport IconButton from '../../components/IconButton';\r\nimport { IoBag as CartIcon } from 'react-icons/io5';\r\nimport MenuIcon from './MenIcon';\r\nimport Bag from '../Bag/Bag';\r\nimport { CSSTransition } from 'react-transition-group';\r\nimport Logo from '../../components/Logo';\r\nimport { BagItemType } from '../../../types';\r\n\r\nconst navLinksData = [\r\n  { content: 'home', to: '/' },\r\n  { content: 'shop', to: '/products' },\r\n  { content: 'our story', to: '/about' },\r\n  { content: 'contact us', to: '/contact' },\r\n];\r\n\r\nconst MobileNavbar = () => {\r\n  return (\r\n    <div className={classes['mobile-nav']}>\r\n      {navLinksData.map((navLinkData, index) => (\r\n        <NavLink key={index} size=\"lg\" {...navLinkData} />\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface NavbarProps {\r\n  bagItems: BagItemType[];\r\n  subtotal: number;\r\n}\r\n\r\nconst Navbar: React.FC<NavbarProps> = ({ bagItems, subtotal }) => {\r\n  const [mobileNavbarIsShown, setMobileNavbarIsShown] = useState(false);\r\n  const [isBagShown, setIsBagShown] = useState(false);\r\n\r\n  const closeBag = () => setIsBagShown(false);\r\n\r\n  const bagContainerRef = useRef<HTMLDivElement | null>(null);\r\n  const bagRef = useRef<HTMLDivElement | null>(null);\r\n\r\n  useEffect(() => {\r\n    const onClickOutside = (event: globalThis.MouseEvent) => {\r\n      if (\r\n        bagContainerRef.current &&\r\n        !bagContainerRef.current.contains(event.target as Node)\r\n      ) {\r\n        closeBag();\r\n      }\r\n    };\r\n\r\n    document.addEventListener('mousedown', onClickOutside);\r\n\r\n    return () => {\r\n      document.removeEventListener('mousedown', onClickOutside);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <>\r\n      <div\r\n        className={`${classes.nav} ${\r\n          mobileNavbarIsShown && classes['nav--mobile-nav-visible']\r\n        }`}\r\n      >\r\n        <IconButton\r\n          onClick={() => setMobileNavbarIsShown(prev => !prev)}\r\n          className={classes['mobile-nav-button']}\r\n          variant=\"primary\"\r\n        >\r\n          <MenuIcon isActive={mobileNavbarIsShown} />\r\n        </IconButton>\r\n        <Logo />\r\n        <div className={classes['nav-links-container']}>\r\n          {navLinksData.map((navLinkData, index) => (\r\n            <NavLink key={index} {...navLinkData} />\r\n          ))}\r\n        </div>\r\n        <div className={classes['bag-btn-container']} ref={bagContainerRef}>\r\n          <IconButton onClick={() => setIsBagShown(true)} variant=\"primary\">\r\n            <CartIcon />\r\n          </IconButton>\r\n\r\n          <CSSTransition\r\n            classNames=\"fade\"\r\n            nodeRef={bagRef}\r\n            timeout={300}\r\n            in={isBagShown}\r\n            unmountOnExit\r\n            mountOnEnter\r\n          >\r\n            <Bag items={bagItems} subtotal={subtotal} onClose={closeBag} />\r\n          </CSSTransition>\r\n        </div>\r\n      </div>\r\n      <MobileNavbar />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n","import React from 'react';\r\n\r\ninterface IconLinkProps {\r\n  href: string;\r\n  title: string;\r\n}\r\n\r\nconst IconLink: React.FC<IconLinkProps> = ({ children, href, title }) => {\r\n  return (\r\n    <a\r\n      className=\"icon-link\"\r\n      title={title}\r\n      href={href}\r\n      target=\"_blank\"\r\n      rel=\"noreferrer\"\r\n    >\r\n      {children}\r\n    </a>\r\n  );\r\n};\r\n\r\nexport default IconLink;\r\n","import React from 'react';\r\nimport {\r\n  IoCallOutline,\r\n  IoMailOutline,\r\n  IoLocationOutline,\r\n  IoLogoFacebook as FacebookLogo,\r\n  IoLogoGithub as GithubLogo,\r\n  IoLogoTwitter as TwitterLogo,\r\n} from 'react-icons/io5';\r\nimport { IconType } from 'react-icons/lib';\r\nimport IconLink from '../../components/IconLink';\r\nimport classes from './Footer.module.css';\r\n\r\nconst footerSections = [\r\n  {\r\n    icon: IoLocationOutline,\r\n    header: 'Location',\r\n    content: 'New Damietta, Damietta, Egypt',\r\n    link: 'https://www.google.com/maps/place/Damietta+El-Gadeeda+City,+Kafr+Saad,+Damietta+Governorate/@31.4383128,31.6311286,12z/data=!3m1!4b1!4m5!3m4!1s0x14f9e375eb0246b7:0x8e6df51878254838!8m2!3d31.431304!4d31.685341',\r\n  },\r\n  { icon: IoCallOutline, header: 'Phone number', content: '01019967816' },\r\n  {\r\n    icon: IoMailOutline,\r\n    header: 'Email addresss',\r\n    link: 'mailto:dryosefbeder@gmail.com',\r\n    content: 'dryosefbeder@gmail.com',\r\n  },\r\n];\r\n\r\nconst socialAccounts = [\r\n  { icon: FacebookLogo, title: 'facebook', href: '' },\r\n  { icon: TwitterLogo, title: 'twitter', href: '' },\r\n  { icon: GithubLogo, title: 'github', href: '' },\r\n];\r\n\r\ninterface FooterSectionProps {\r\n  icon: IconType;\r\n  header: string;\r\n  content: string;\r\n  link?: string;\r\n}\r\n\r\nconst FooterSection: React.FC<FooterSectionProps> = ({\r\n  icon: Icon,\r\n  header,\r\n  content,\r\n  link,\r\n}) => {\r\n  return (\r\n    <div className={classes['footer-section']}>\r\n      <a\r\n        href={link}\r\n        target=\"_blank\"\r\n        rel=\"noreferrer\"\r\n        className={classes['footer-section__icon-container']}\r\n      >\r\n        <Icon />\r\n      </a>\r\n      <h3 className=\"header-3\">{header}</h3>\r\n      <p className=\"p-1\">{content}</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nconst Footer = () => {\r\n  return (\r\n    <div className={classes.container}>\r\n      {footerSections.map((footerSection, index) => (\r\n        <FooterSection key={index} {...footerSection} />\r\n      ))}\r\n      <div className={classes['social-info']}>\r\n        <h2 className=\"header-2\">Follow us on</h2>\r\n        <div className={classes['links-container']}>\r\n          {socialAccounts.map(({ icon: Icon, ...linkProps }, index) => (\r\n            <IconLink key={index} {...linkProps}>\r\n              <Icon />\r\n            </IconLink>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      <p className=\"p-2\">© 2021 - All Copyrights Reserved To Yosef Beder</p>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Footer;\r\n","import React from 'react';\r\nimport Navbar from '../Navbar/Navbar';\r\nimport Footer from '../Footer/Footer';\r\nimport { useAppSelector } from '../../../hooks/redux';\r\n\r\nconst Layout: React.FC = ({ children }) => {\r\n  const bag = useAppSelector(state => state.bag.data);\r\n  const bagIsLoaded = useAppSelector(state => state.bag.status) === 'loaded';\r\n\r\n  return bagIsLoaded ? (\r\n    <>\r\n      <Navbar bagItems={bag!.items} subtotal={bag!.subtotal} />\r\n      {children}\r\n      <Footer />\r\n    </>\r\n  ) : null;\r\n};\r\n\r\nexport default Layout;\r\n","import React, { useState } from 'react';\r\nimport classes from './Product.module.css';\r\nimport Button from '../../../../common/components/Button';\r\nimport { formatPriceEGP } from '../../../../utils/numbers';\r\n\r\ninterface ProductProps {\r\n  imgSrc: string;\r\n  name: string;\r\n  price: number;\r\n  disabled: boolean;\r\n  onClick: () => void;\r\n  onAddToBag: () => Promise<void>;\r\n}\r\n\r\nconst Product: React.FC<ProductProps> = ({\r\n  imgSrc,\r\n  name,\r\n  price,\r\n  disabled,\r\n  onClick,\r\n  onAddToBag,\r\n}) => {\r\n  const [isLoading, setIsLoading] = useState(false);\r\n\r\n  return (\r\n    <div className={classes.container}>\r\n      <img className={classes.img} src={imgSrc} alt={name} />\r\n      <div className={classes.info}>\r\n        <p className={`txt-primary ${classes.name}`} onClick={onClick}>\r\n          {name}\r\n        </p>\r\n        <p className=\"txt-emphasize\">{formatPriceEGP(price)}</p>\r\n        <Button\r\n          isLoading={isLoading}\r\n          disabled={disabled}\r\n          variant=\"contained\"\r\n          onClick={async () => {\r\n            try {\r\n              setIsLoading(true);\r\n              await onAddToBag();\r\n            } catch (err) {\r\n              alert('Something went wrong');\r\n            }\r\n            setIsLoading(false);\r\n          }}\r\n        >\r\n          Add To Bag\r\n        </Button>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Product;\r\n","import React from 'react';\r\nimport Product from './Product';\r\nimport classes from '../../shop.module.css';\r\nimport { useAppDispatch, useAppSelector } from '../../../../hooks/redux';\r\nimport { useHistory } from 'react-router-dom';\r\nimport { commerce } from '../../../../api/commerce';\r\nimport { actions as bagActions } from '../../../../store/bag';\r\n\r\nconst ProductsList = () => {\r\n  const products = useAppSelector(state => state.products.data)!;\r\n  const bag = useAppSelector(state => state.bag.data)!;\r\n  const history = useHistory();\r\n  const dispatch = useAppDispatch();\r\n\r\n  return (\r\n    <div className={classes['products-container']}>\r\n      {products.map(\r\n        ({ id, imgSrcs, description, available, ...productProps }) => {\r\n          const bagItem = bag!.items.find(item => item.productId === id);\r\n          let itemId: string;\r\n\r\n          return (\r\n            <Product\r\n              key={id}\r\n              imgSrc={imgSrcs[0]}\r\n              {...productProps}\r\n              onClick={() => history.push(`products/${id}`)}\r\n              disabled={available - (bagItem?.quantity || 0) === 0}\r\n              onAddToBag={async () => {\r\n                // check if the item does exist\r\n\r\n                // update the cloud version first\r\n                const request = await commerce.cart.add(id, 1);\r\n                itemId = request.line_item_id;\r\n\r\n                if (bagItem) {\r\n                  // if so just update the quantity (if there's enough in stock)\r\n                  dispatch(\r\n                    bagActions.changeQuantity({ id: itemId!, change: 1 }),\r\n                  );\r\n                }\r\n\r\n                // else add it\r\n                if (!bagItem) {\r\n                  dispatch(\r\n                    bagActions.add({\r\n                      id: itemId!,\r\n                      productId: id,\r\n                      quantity: 1,\r\n                      imgSrc: imgSrcs[0],\r\n                      available,\r\n                      ...productProps,\r\n                    }),\r\n                  );\r\n                }\r\n              }}\r\n            />\r\n          );\r\n        },\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ProductsList;\r\n","import React from 'react';\r\nimport Layout from '../../common/containers/Layout';\r\nimport { ProductsList } from './containers';\r\nimport classes from './shop.module.css';\r\n\r\nconst Shop = () => {\r\n  return (\r\n    <Layout>\r\n      <main className={classes.main}>\r\n        <h1 className={`header-1 ${classes.header}`}>Shop all products</h1>\r\n        <p className={`p-1 ${classes.p}`}>\r\n          We buy the best cubes in the world and sell them with the best prices\r\n          in the world!\r\n        </p>\r\n        <p className=\"p-1\">\r\n          All of our products have a warranty for a full year, and can be\r\n          replaced or returned back within 14 days of receiving the product.\r\n        </p>\r\n        <ProductsList />\r\n      </main>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Shop;\r\n","import React, { InputHTMLAttributes } from 'react';\r\n\r\ninterface InputProps {\r\n  hasError?: boolean;\r\n}\r\n\r\nconst Input = React.forwardRef<\r\n  HTMLInputElement,\r\n  InputProps & InputHTMLAttributes<HTMLInputElement>\r\n>((props, ref) => {\r\n  const { hasError, className, ...inputElProps } = props;\r\n\r\n  return (\r\n    <input\r\n      className={`input ${hasError && 'input--invalid'} ${className}`}\r\n      ref={ref}\r\n      {...inputElProps}\r\n    />\r\n  );\r\n});\r\n\r\nexport default Input;\r\n","import React from 'react';\r\nimport classes from './Form.module.css';\r\nimport Input from '../../../../common/components/Input';\r\nimport { FormState } from '../..';\r\nimport Select from 'react-select';\r\nimport Button from '../../../../common/components/Button';\r\nimport {\r\n  CardNumberElement,\r\n  CardCvcElement,\r\n  CardExpiryElement,\r\n} from '@stripe/react-stripe-js';\r\nimport { UseFormReturn } from 'react-hook-form';\r\nimport { OptionTypeBase } from 'react-select';\r\n\r\nconst getStripeInputOptions = (fullWidth: boolean = false) => ({\r\n  classes: {\r\n    invalid: 'stripe-input--invalid',\r\n    focus: 'stripe-input--focus',\r\n    base: `stripe-input ${fullWidth && classes['grid-item--full-width']}`,\r\n  },\r\n});\r\n\r\ninterface FormProps {\r\n  formMethods: UseFormReturn<FormState>;\r\n  isLoaded: boolean;\r\n  isCapturingOrder: boolean;\r\n  onSubmit: (data: FormState) => void;\r\n  subdivisions: OptionTypeBase[];\r\n  subdivision: OptionTypeBase | null;\r\n  onSubdivisionChagne: (selectedValue: OptionTypeBase) => void;\r\n  shippingOptions: OptionTypeBase[];\r\n  shippingOption: OptionTypeBase | null;\r\n  onShippingOptionChange: (selectedValue: OptionTypeBase) => void;\r\n}\r\n\r\nconst Form: React.FC<FormProps> = ({\r\n  formMethods,\r\n  isLoaded,\r\n  isCapturingOrder,\r\n  subdivisions,\r\n  subdivision,\r\n  onSubdivisionChagne,\r\n  shippingOptions,\r\n  shippingOption,\r\n  onShippingOptionChange,\r\n  onSubmit,\r\n}) => {\r\n  const {\r\n    register,\r\n    handleSubmit,\r\n    formState: { errors },\r\n  } = formMethods;\r\n\r\n  return (\r\n    <form className={classes.container} onSubmit={handleSubmit(onSubmit)}>\r\n      <div className={classes['form-group']}>\r\n        <h2 className={`header-2 ${classes['form-group__text']}`}>\r\n          Customer information\r\n        </h2>\r\n        <Input\r\n          {...register('firstName', { required: true })}\r\n          hasError={Boolean(errors.firstName)}\r\n          placeholder=\"First name\"\r\n        />\r\n\r\n        <Input\r\n          {...register('lastName', { required: true })}\r\n          hasError={Boolean(errors.lastName)}\r\n          placeholder=\"Last name\"\r\n        />\r\n\r\n        <Input\r\n          {...register('email', {\r\n            required: true,\r\n            pattern:\r\n              /^(([^<>()[\\]\\.,;:\\s@\\\"]+(\\.[^<>()[\\]\\.,;:\\s@\\\"]+)*)|(\\\".+\\\"))@(([^<>()[\\]\\.,;:\\s@\\\"]+\\.)+[^<>()[\\]\\.,;:\\s@\\\"]{2,})$/i,\r\n          })}\r\n          hasError={Boolean(errors.email)}\r\n          placeholder=\"Email\"\r\n          className={classes['grid-item--full-width']}\r\n        />\r\n        <p className={`p-2 ${classes['form-group__text']}`}>\r\n          We'll only use your email to send your order confirmation\r\n        </p>\r\n      </div>\r\n\r\n      <div className={classes['form-group']}>\r\n        <h2 className={`header-2 ${classes['form-group__text']}`}>\r\n          Delivery information\r\n        </h2>\r\n        <Input\r\n          {...register('address', { required: true })}\r\n          hasError={Boolean(errors.address)}\r\n          placeholder=\"Address\"\r\n        />\r\n\r\n        <Input\r\n          {...register('city', { required: true })}\r\n          hasError={Boolean(errors.city)}\r\n          placeholder=\"City\"\r\n        />\r\n\r\n        <Select\r\n          placeholder=\"Subdivision\"\r\n          options={subdivisions}\r\n          value={subdivision}\r\n          onChange={onSubdivisionChagne}\r\n          theme={theme => ({\r\n            ...theme,\r\n            colors: {\r\n              ...theme.colors,\r\n              neutral20: 'var(--color-grey-light)',\r\n              primary: 'var(--color-primary)',\r\n            },\r\n          })}\r\n        />\r\n\r\n        <Input\r\n          {...register('postalCode', {\r\n            maxLength: 10,\r\n            minLength: 5,\r\n            validate: n => !Number.isNaN(Number(n)),\r\n          })}\r\n          hasError={Boolean(errors.postalCode)}\r\n          placeholder=\"Postal code\"\r\n        />\r\n\r\n        <Select\r\n          placeholder=\"Shipping Option\"\r\n          options={shippingOptions}\r\n          value={shippingOption}\r\n          onChange={onShippingOptionChange}\r\n          theme={theme => ({\r\n            ...theme,\r\n            colors: {\r\n              ...theme.colors,\r\n              neutral20: 'var(--color-grey-light)',\r\n              primary: 'var(--color-primary)',\r\n            },\r\n          })}\r\n        />\r\n\r\n        <Input\r\n          {...register('phoneNumber', {\r\n            maxLength: 11,\r\n            minLength: 11,\r\n            validate: n => !Number.isNaN(Number(n)),\r\n          })}\r\n          hasError={Boolean(errors.phoneNumber)}\r\n          placeholder=\"Phone number\"\r\n        />\r\n\r\n        <p className={`p-2 ${classes['form-group__text']}`}>\r\n          The only country that we can ship to at the moment is egypt\r\n        </p>\r\n      </div>\r\n\r\n      <div className={classes['form-group']}>\r\n        <h2 className={`header-2 ${classes['form-group__text']}`}>\r\n          Payment information\r\n        </h2>\r\n\r\n        <CardNumberElement options={getStripeInputOptions(true)} />\r\n\r\n        <CardExpiryElement options={getStripeInputOptions()} />\r\n\r\n        <CardCvcElement options={getStripeInputOptions()} />\r\n\r\n        <p className={`p-2 ${classes['form-group__text']}`}>\r\n          This form is encrypted by stripe\r\n        </p>\r\n      </div>\r\n\r\n      <Button type=\"submit\" isLoading={!isLoaded || isCapturingOrder}>\r\n        Place order\r\n      </Button>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default Form;\r\n","import React from 'react';\r\nimport { formatPriceEGP } from '../../../../utils/numbers';\r\nimport classes from './Summary.module.css';\r\n\r\ninterface SummaryItemProps {\r\n  imgSrc: string;\r\n  name: string;\r\n  quantity: number;\r\n  price: number;\r\n}\r\n\r\nconst SummaryItem: React.FC<SummaryItemProps> = ({\r\n  imgSrc,\r\n  name,\r\n  quantity,\r\n  price,\r\n}) => {\r\n  return (\r\n    <div className={classes['summary-item']}>\r\n      <img className={classes['summary-item__img']} src={imgSrc} alt={name} />\r\n      <p className={`${classes['summary-item__p']} txt-primary`}>\r\n        {name} x {quantity}\r\n      </p>\r\n      <div className={`${classes['summary-item__price']} txt-emphasize`}>\r\n        {formatPriceEGP(price)}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default SummaryItem;\r\n","import React from 'react';\r\nimport classes from './Summary.module.css';\r\nimport SummaryItem from './SummaryItem';\r\nimport { formatPriceEGP } from '../../../../utils/numbers';\r\nimport { BagItemType } from '../../../../types';\r\n\r\ninterface SummaryProps {\r\n  subtotal: number;\r\n  delivery?: number;\r\n  items: BagItemType[];\r\n}\r\n\r\nconst Summary: React.FC<SummaryProps> = ({ subtotal, delivery, items }) => {\r\n  return (\r\n    <div className={classes.container}>\r\n      <h2 className={`header-2 ${classes.header}`}>Order summary</h2>\r\n\r\n      <div className={classes['summary-items-list']}>\r\n        {items.map(({ id, ...itemProps }) => (\r\n          <SummaryItem key={id} {...itemProps} />\r\n        ))}\r\n      </div>\r\n\r\n      <div className={classes['price-summary']}>\r\n        <div\r\n          className={`${classes['price-summary__group']} ${classes['price-summary__group--sm']} txt-primary`}\r\n        >\r\n          <span>Subtotal</span>\r\n          <span>{formatPriceEGP(subtotal)}</span>\r\n        </div>\r\n        {delivery !== undefined && (\r\n          <div\r\n            className={`${classes['price-summary__group']} ${classes['price-summary__group--sm']} txt-primary`}\r\n          >\r\n            <span>Delivery</span>\r\n            <span>{formatPriceEGP(delivery)}</span>\r\n          </div>\r\n        )}\r\n        <div\r\n          className={`${classes['price-summary__group']} ${classes['price-summary__group--lg']} txt-emphasize`}\r\n        >\r\n          <span>Total</span>\r\n          <span>{formatPriceEGP(subtotal + (delivery || 0))}</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default Summary;\r\n","import React, { useState } from 'react';\r\nimport { Form, Summary } from './containers';\r\nimport classes from './checkout.module.css';\r\nimport { loadStripe, Stripe, StripeElements } from '@stripe/stripe-js';\r\nimport { Elements, ElementsConsumer } from '@stripe/react-stripe-js';\r\nimport Layout from '../../common/containers/Layout';\r\nimport { useAppDispatch, useAppSelector } from '../../hooks/redux';\r\nimport { useEffect } from 'react';\r\nimport { actions as bagActions } from '../../store/bag';\r\n\r\nimport { OptionTypeBase } from 'react-select';\r\nimport { useForm } from 'react-hook-form';\r\nimport { commerce } from '../../api/commerce';\r\nimport { formatPriceEGP } from '../../utils/numbers';\r\nimport { useHistory } from 'react-router-dom';\r\n\r\nconst stripePublicKey = process.env.REACT_APP_STRIPE_PUBLIC_KEY!;\r\n\r\nconst stripePromise = loadStripe(stripePublicKey);\r\n\r\nconst country = 'EG';\r\n\r\nexport interface FormState {\r\n  firstName: string;\r\n  lastName: string;\r\n  email: string;\r\n  address: string;\r\n  city: string;\r\n  postalCode: string;\r\n  phoneNumber: string;\r\n}\r\n\r\nconst Checkout = () => {\r\n  const dispatch = useAppDispatch();\r\n  const history = useHistory();\r\n  const bag = useAppSelector(state => state.bag.data)!;\r\n  const bagIsLoaded = useAppSelector(state => state.bag.status) === 'loaded';\r\n  const [checkoutTokenId, setCheckoutTokenId] = useState('');\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [isCapturingOrder, setIsCapturingOrder] = useState(false);\r\n\r\n  // disabling the bag\r\n  useEffect(() => {\r\n    dispatch(bagActions.disableBag());\r\n\r\n    return () => {\r\n      dispatch(bagActions.enableBag());\r\n    };\r\n  }, [dispatch]);\r\n\r\n  // Form\r\n  const formMethods = useForm<FormState>();\r\n  const [subdivision, setSubdivision] = useState<OptionTypeBase | null>(null);\r\n  const [subdivisions, setSubdivisions] = useState<OptionTypeBase[]>([]);\r\n  const [shippingOption, setShippingOption] = useState<OptionTypeBase | null>(\r\n    null,\r\n  );\r\n  const [shippingOptions, setShippingOptions] = useState<OptionTypeBase[]>([]);\r\n\r\n  const onFormSubmit = async (\r\n    stripe: Stripe | null,\r\n    elements: StripeElements | null,\r\n    {\r\n      firstName,\r\n      lastName,\r\n      email,\r\n      phoneNumber,\r\n      address,\r\n      city,\r\n      postalCode,\r\n    }: FormState,\r\n  ) => {\r\n    // stripe payment handling code...\r\n\r\n    const line_items: { [key: string]: { quantity: number } } = {};\r\n\r\n    bag.items.forEach(({ id, quantity }) => {\r\n      line_items[id] = {\r\n        quantity,\r\n      };\r\n    });\r\n\r\n    try {\r\n      setIsCapturingOrder(true);\r\n\r\n      await commerce.checkout.capture(checkoutTokenId, {\r\n        line_items,\r\n        customer: {\r\n          firstname: firstName,\r\n          lastname: lastName,\r\n          email,\r\n          phone: `+2${phoneNumber}`,\r\n        },\r\n        shipping: {\r\n          name: `${firstName} ${lastName}`,\r\n          street: address,\r\n          town_city: city,\r\n          county_state: `${country}-${subdivision!.value}`,\r\n          country: country,\r\n          postal_zip_code: postalCode,\r\n        },\r\n        fulfillment: {\r\n          shipping_method: shippingOption!.value.id,\r\n        },\r\n        // ! payment isn't handled\r\n        payment: {\r\n          gateway: 'test_gateway',\r\n          card: {\r\n            number: '4242424242424242',\r\n            expiry_month: '02',\r\n            expiry_year: '24',\r\n            cvc: '123',\r\n            postal_zip_code: postalCode,\r\n          },\r\n        },\r\n      });\r\n\r\n      dispatch(bagActions.resetBag((await commerce.cart.retrieve()).id));\r\n\r\n      setIsCapturingOrder(false);\r\n\r\n      alert(\r\n        '🎉 Succeeded!\\nThanks for buying from us 😘.\\nThe next step is to check your email 🚀.',\r\n      );\r\n    } catch (err) {\r\n      setIsCapturingOrder(false);\r\n      alert(\r\n        '😢 Error\\nSomething went wrong while capturing the order :(\\nTry again later 😀',\r\n      );\r\n    }\r\n    history.push('/products');\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (bagIsLoaded) {\r\n      if (bag.subtotal === 0) {\r\n        history.replace('/products');\r\n        return;\r\n      }\r\n\r\n      (async () => {\r\n        try {\r\n          const checkoutToken = await commerce.checkout.generateToken(bag.id, {\r\n            type: 'cart',\r\n          });\r\n\r\n          const subdivisions = Object.entries(\r\n            (await commerce.services.localeListSubdivisions(country))\r\n              .subdivisions,\r\n          ).map(([code, key]) => ({\r\n            label: key,\r\n            value: code,\r\n          }));\r\n\r\n          const shippingOptions = checkoutToken.shipping_methods.map(\r\n            ({ id, description: name, price: { raw: price } }) => ({\r\n              label: `${name} - ${formatPriceEGP(price)}`,\r\n              value: { id, price },\r\n            }),\r\n          );\r\n\r\n          setSubdivisions(subdivisions);\r\n          setShippingOptions(shippingOptions);\r\n          setSubdivision(subdivisions[0]);\r\n          setShippingOption(shippingOptions[0]);\r\n          setCheckoutTokenId(checkoutToken.id);\r\n          setIsLoaded(true);\r\n        } catch (err) {\r\n          alert(new Error('Something went wrong, Please refresh the page'));\r\n        }\r\n      })();\r\n    }\r\n  }, [bagIsLoaded]);\r\n\r\n  // Summary\r\n\r\n  return (\r\n    <Layout>\r\n      <main className={classes.main}>\r\n        <h1 className={`header-1 ${classes.header}`}>Checkout</h1>\r\n        <div className={classes.container}>\r\n          <Elements stripe={stripePromise}>\r\n            <ElementsConsumer>\r\n              {({ stripe, elements }) => (\r\n                <Form\r\n                  {...{\r\n                    formMethods,\r\n                    isLoaded,\r\n                    isCapturingOrder,\r\n                    onSubmit: onFormSubmit.bind(null, stripe, elements),\r\n                    subdivisions,\r\n                    subdivision,\r\n                    onSubdivisionChagne: selectedValue =>\r\n                      setSubdivision(selectedValue),\r\n                    shippingOptions,\r\n                    shippingOption,\r\n                    onShippingOptionChange: selectedValue =>\r\n                      setShippingOption(selectedValue),\r\n                  }}\r\n                />\r\n              )}\r\n            </ElementsConsumer>\r\n          </Elements>\r\n          {bagIsLoaded && (\r\n            <Summary\r\n              items={bag.items}\r\n              subtotal={bag.subtotal}\r\n              delivery={shippingOption?.value.price}\r\n            />\r\n          )}\r\n        </div>\r\n      </main>\r\n    </Layout>\r\n  );\r\n};\r\n\r\nexport default Checkout;\r\n","import React from 'react';\r\nimport { useHistory } from 'react-router-dom';\r\nimport Button from '../../components/Button';\r\n\r\nconst NotAvailable = () => {\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <>\r\n      <h2\r\n        className=\"header-2\"\r\n        style={{ width: 'max-content', margin: '1rem auto' }}\r\n      >\r\n        This page isn't available at the moment\r\n      </h2>\r\n      <Button\r\n        style={{ width: 'max-content', margin: '1rem auto', padding: '0 1rem' }}\r\n        onClick={() => history.push('/products')}\r\n      >\r\n        Go the shop\r\n      </Button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NotAvailable;\r\n","import NotAvailable from '../../common/containers/NotAvailable';\r\n\r\nexport default NotAvailable;\r\n","import NotAvailable from '../../common/containers/NotAvailable';\r\n\r\nexport default NotAvailable;\r\n","import NotAvailable from '../../common/containers/NotAvailable';\r\n\r\nexport default NotAvailable;\r\n","import { createAsyncThunk, createSlice, PayloadAction } from '@reduxjs/toolkit';\r\nimport { getAllProducts } from '../api/commerce';\r\nimport { ProductType, StatusType } from '../types';\r\n\r\nconst initialState: {\r\n  status: StatusType;\r\n  selectedProduct: string;\r\n  data: null | ProductType[];\r\n} = {\r\n  status: 'loading',\r\n  selectedProduct: '',\r\n  data: null,\r\n};\r\n\r\nexport const fetchProducts = createAsyncThunk(\r\n  'fetchProducts',\r\n  async () => await getAllProducts(),\r\n);\r\n\r\nconst slice = createSlice({\r\n  name: 'products',\r\n  initialState,\r\n  reducers: {\r\n    setSelectedProduct(state, action: PayloadAction<string>) {\r\n      state.selectedProduct = action.payload;\r\n    },\r\n  },\r\n  extraReducers: builder => {\r\n    builder.addCase(fetchProducts.pending, state => {\r\n      state.status = 'loading';\r\n    });\r\n    builder.addCase(fetchProducts.fulfilled, (state, action) => {\r\n      state.status = 'loaded';\r\n      state.data = action.payload;\r\n    });\r\n    builder.addCase(fetchProducts.rejected, state => {\r\n      state.status = 'failed';\r\n      state.data = null;\r\n    });\r\n  },\r\n});\r\n\r\nexport default slice.reducer;\r\nexport const actions = slice.actions;\r\n","import React, { useState, useEffect } from 'react';\r\nimport classes from './product.module.css';\r\nimport IconButton from '../../common/components/IconButton';\r\nimport { IoHeart, IoHeartOutline, IoLinkOutline } from 'react-icons/io5';\r\nimport Button from '../../common/components/Button';\r\nimport Input from '../../common/components/Input';\r\nimport { formatPriceEGP } from '../../utils/numbers';\r\nimport Layout from '../../common/containers/Layout';\r\nimport { useHistory, useParams } from 'react-router-dom';\r\nimport { useAppSelector } from '../../hooks/redux';\r\nimport { useDispatch } from 'react-redux';\r\nimport { actions as productsActions } from '../../store/products';\r\nimport { commerce } from '../../api/commerce';\r\nimport { actions as bagActions } from '../../store/bag';\r\nimport { CopyToClipboard } from 'react-copy-to-clipboard';\r\nimport { homepage } from '../../../package.json';\r\n\r\nconsole.log(homepage);\r\n\r\nconst Product = () => {\r\n  const dispatch = useDispatch();\r\n  const history = useHistory();\r\n\r\n  const { id: paramsId } = useParams<{ id: string }>();\r\n\r\n  let productIndex = useAppSelector(state =>\r\n    state.products.data!.findIndex(product => product.id === paramsId),\r\n  );\r\n\r\n  productIndex = productIndex === -1 ? 0 : productIndex;\r\n\r\n  const { id, name, description, imgSrcs, available, price } = useAppSelector(\r\n    state => state.products.data![productIndex],\r\n  );\r\n\r\n  // app wide state\r\n  const bag = useAppSelector(state => state.bag.data)!;\r\n  const bagIsLoaded = useAppSelector(state => state.bag.status) === 'loaded';\r\n  const quantityInBag =\r\n    bag?.items.find(item => item.productId === id)?.quantity || 0;\r\n\r\n  // local state\r\n  const [selectedImg, setSelectedImg] = useState(0);\r\n  const [quantity, setQuantity] = useState(0);\r\n  const [isAddingToBag, setIsAddingToBag] = useState(false);\r\n\r\n  useEffect(() => {\r\n    if (id !== paramsId) history.replace(`/products/${id}`);\r\n\r\n    dispatch(productsActions.setSelectedProduct(id));\r\n\r\n    return () => {\r\n      dispatch(productsActions.setSelectedProduct(''));\r\n    };\r\n  }, [dispatch, id]);\r\n\r\n  // Adding to favorite\r\n  const [inFavorite, setInFavorite] = useState(\r\n    Boolean(localStorage.getItem(`heart:${id}`)),\r\n  );\r\n\r\n  // Add to favorite listener\r\n  useEffect(() => {\r\n    const key = `heart:${id}`;\r\n    const inLocalStorage = localStorage.getItem(key);\r\n\r\n    if (inFavorite && !inLocalStorage) {\r\n      localStorage.setItem(key, 'true');\r\n    }\r\n\r\n    if (!inFavorite && inLocalStorage) {\r\n      localStorage.removeItem(key);\r\n    }\r\n  }, [inFavorite, id]);\r\n\r\n  // Copy to clipboard\r\n  const [isCopied, setIsCopied] = useState(false);\r\n\r\n  return bagIsLoaded ? (\r\n    <Layout>\r\n      <main className={classes.main}>\r\n        <div className={classes['imgs-container']}>\r\n          {imgSrcs.map((imgSrc, index) => (\r\n            <img\r\n              key={index}\r\n              className={`${classes.img} ${\r\n                index === selectedImg && classes['img--selected']\r\n              }`}\r\n              onClick={() => setSelectedImg(index)}\r\n              src={imgSrc}\r\n              alt=\"\"\r\n            />\r\n          ))}\r\n        </div>\r\n        <img\r\n          className={classes['selected-img']}\r\n          src={imgSrcs[selectedImg]}\r\n          alt=\"\"\r\n        />\r\n        <div className={classes.details}>\r\n          <h1 className=\"header-1\">{name}</h1>\r\n          <h2 className=\"header-2\">{formatPriceEGP(price)}</h2>\r\n          <ul\r\n            className={classes['description-list']}\r\n            dangerouslySetInnerHTML={{ __html: description }}\r\n          ></ul>\r\n        </div>\r\n        <div className={`${classes.actions} ${classes['actions--1']}`}>\r\n          <IconButton\r\n            variant=\"quaternary\"\r\n            onClick={() => setInFavorite(prev => !prev)}\r\n          >\r\n            {inFavorite ? (\r\n              <IoHeart style={{ color: 'tomato' }} />\r\n            ) : (\r\n              <IoHeartOutline />\r\n            )}\r\n          </IconButton>\r\n          <CopyToClipboard\r\n            onCopy={() => setIsCopied(true)}\r\n            text={`${homepage}#/products/${id}`}\r\n          >\r\n            <IconButton variant=\"quaternary\" onClick={() => {}}>\r\n              <IoLinkOutline />\r\n            </IconButton>\r\n          </CopyToClipboard>\r\n          {isCopied && <span className=\"txt-primary\">Copied!</span>}\r\n        </div>\r\n        <div className={`${classes.actions} ${classes['actions--2']}`}>\r\n          <Input\r\n            type=\"number\"\r\n            value={quantity}\r\n            onChange={e => setQuantity(+e.target.value)}\r\n            min={0}\r\n            max={available - quantityInBag}\r\n          />\r\n          <Button\r\n            disabled={quantity === 0 || quantity + quantityInBag > available}\r\n            isLoading={isAddingToBag}\r\n            onClick={async () => {\r\n              try {\r\n                setIsAddingToBag(true);\r\n\r\n                // add it to the cloud\r\n                const request = await commerce.cart.add(id, quantity);\r\n\r\n                // add it if it's not in the bag already\r\n                const bagItem = bag.items.find(item => item.productId === id);\r\n\r\n                if (!bagItem) {\r\n                  dispatch(\r\n                    bagActions.add({\r\n                      id: request.line_item_id!,\r\n                      productId: id,\r\n                      quantity: quantity,\r\n                      imgSrc: imgSrcs[0],\r\n                      name: name,\r\n                      available: available,\r\n                      price: price,\r\n                    }),\r\n                  );\r\n                }\r\n\r\n                // increase the quantity if it's in the bag\r\n                if (bagItem) {\r\n                  dispatch(\r\n                    bagActions.changeQuantity({\r\n                      id: request.line_item_id,\r\n                      change: quantity,\r\n                    }),\r\n                  );\r\n                }\r\n\r\n                // reset quantity to 0\r\n                setQuantity(0);\r\n              } catch (err) {\r\n                alert(new Error('Something went wrong'));\r\n              }\r\n              setIsAddingToBag(false);\r\n            }}\r\n          >\r\n            Add To Cart\r\n          </Button>\r\n        </div>\r\n      </main>\r\n    </Layout>\r\n  ) : null;\r\n};\r\n\r\nexport default Product;\r\n","import Shop from './pages/shop';\r\nimport Checkout from './pages/checkout';\r\nimport Home from './pages/home';\r\nimport About from './pages/about';\r\nimport Contact from './pages/contact';\r\nimport Product from './pages/product';\r\n\r\nconst routes = [\r\n  { path: '/', exact: true, component: Home },\r\n  { path: '/products/:id', component: Product },\r\n  { path: '/products', component: Shop },\r\n  { path: '/checkout', component: Checkout },\r\n  { path: '/about', component: About },\r\n  { path: '/contact', component: Contact },\r\n];\r\n\r\nexport default routes;\r\n","import React from 'react';\r\nimport { Link, useHistory } from 'react-router-dom';\r\nimport Button from '../../common/components/Button';\r\n\r\nconst NotFound = () => {\r\n  const history = useHistory();\r\n\r\n  return (\r\n    <>\r\n      <h2\r\n        className=\"header-2\"\r\n        style={{ width: 'max-content', margin: '1rem auto' }}\r\n      >\r\n        404: This page doesn't exist\r\n      </h2>\r\n      <Button\r\n        style={{ width: 'max-content', margin: '1rem auto', padding: '0 1rem' }}\r\n        onClick={() => history.replace('/products')}\r\n      >\r\n        Go to the shop\r\n      </Button>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default NotFound;\r\n","import React from 'react';\r\nimport routes from './routes';\r\nimport { Switch, Route } from 'react-router-dom';\r\nimport NotFound from './pages/NotFound';\r\nimport { useEffect } from 'react';\r\nimport { fetchProducts } from './store/products';\r\nimport { useAppDispatch, useAppSelector } from './hooks/redux';\r\nimport { fetchBag } from './store/bag';\r\n\r\nconst App = () => {\r\n  const dispatch = useAppDispatch();\r\n  const productsIsLoaded =\r\n    useAppSelector(state => state.products.status) === 'loaded';\r\n  const products = useAppSelector(state => state.products.data);\r\n  const bagIsLoaded =\r\n    useAppSelector(state => state.products.status) === 'loaded';\r\n\r\n  const isLoaded = bagIsLoaded && productsIsLoaded;\r\n\r\n  useEffect(() => {\r\n    (async () => {\r\n      await dispatch(fetchProducts());\r\n    })();\r\n  }, [dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (productsIsLoaded) {\r\n      (async () => {\r\n        await dispatch(fetchBag(products!));\r\n      })();\r\n    }\r\n  }, [productsIsLoaded, products, dispatch]);\r\n\r\n  return isLoaded ? (\r\n    <Switch>\r\n      {routes.map((route, index) => (\r\n        <Route key={index} {...route} />\r\n      ))}\r\n      <Route path=\"*\" component={NotFound} />\r\n    </Switch>\r\n  ) : null;\r\n};\r\n\r\nexport default App;\r\n","import { configureStore } from '@reduxjs/toolkit';\r\nimport productsReducer from './products';\r\nimport bagReducer from './bag';\r\n\r\nexport const store = configureStore({\r\n  reducer: {\r\n    products: productsReducer,\r\n    bag: bagReducer,\r\n  },\r\n});\r\n\r\nexport type RootState = ReturnType<typeof store.getState>;\r\n\r\nexport type AppDispatch = typeof store.dispatch;\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { HashRouter as Router } from 'react-router-dom';\nimport { Provider } from 'react-redux';\nimport { store } from './store';\n\nReactDOM.render(\n  <React.StrictMode>\n    <Provider store={store}>\n      <Router basename=\"/cubeshop\">\n        <App />\n      </Router>\n    </Provider>\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"nav\":\"Navbar_nav__2_gBX\",\"mobile-nav-button\":\"Navbar_mobile-nav-button__2pSW2\",\"nav-links-container\":\"Navbar_nav-links-container__1EIMl\",\"nav-link\":\"Navbar_nav-link__2FckQ\",\"nav-link--sm\":\"Navbar_nav-link--sm__1eDF4\",\"nav-link--med\":\"Navbar_nav-link--med__1ySy0\",\"nav-link--lg\":\"Navbar_nav-link--lg__2rs-O\",\"nav-link--active\":\"Navbar_nav-link--active__3KWum\",\"mobile-nav\":\"Navbar_mobile-nav__1A-XT\",\"bag-btn-container\":\"Navbar_bag-btn-container__1Cxq-\",\"menu-icon\":\"Navbar_menu-icon__1zk76\",\"menu-icon__bar\":\"Navbar_menu-icon__bar__3_jmb\",\"menu-icon--active\":\"Navbar_menu-icon--active__16d1L\",\"nav--mobile-nav-visible\":\"Navbar_nav--mobile-nav-visible__1U4aW\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Form_container__1m2Gn\",\"form-group\":\"Form_form-group__2H7Wo\",\"form-group__text\":\"Form_form-group__text__2wh6x\",\"grid-item--full-width\":\"Form_grid-item--full-width__1bjcJ\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"product_main__2MzTj\",\"imgs-container\":\"product_imgs-container__2X1nW\",\"img\":\"product_img__-13Bh\",\"img--selected\":\"product_img--selected__3E9pl\",\"selected-img\":\"product_selected-img__1LAEw\",\"details\":\"product_details__BNnrU\",\"description-list\":\"product_description-list__3oCm6\",\"actions\":\"product_actions__1019z\",\"actions--1\":\"product_actions--1__1Act8\",\"actions--2\":\"product_actions--2__3vHGS\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Bag_container__iy27Q\",\"header\":\"Bag_header__3-iV7\",\"actions\":\"Bag_actions__1DoyW\",\"container--empty\":\"Bag_container--empty__2eblS\",\"subtotal\":\"Bag_subtotal__1euBi\",\"checkout-btn\":\"Bag_checkout-btn__2BJ6n\",\"continue-shopping-btn\":\"Bag_continue-shopping-btn__18EAH\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"shop_main__VZt_f\",\"header\":\"shop_header__1br4a\",\"p\":\"shop_p__3kIc8\",\"products-container\":\"shop_products-container__3EWz_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"BagItem_container__1P2tB\",\"img\":\"BagItem_img__3B11w\",\"info\":\"BagItem_info__iSzOw\",\"actions\":\"BagItem_actions__4QOjO\",\"quantity-controller\":\"BagItem_quantity-controller__duaD8\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Footer_container__36YTw\",\"footer-section\":\"Footer_footer-section__JZaCY\",\"footer-section__icon-container\":\"Footer_footer-section__icon-container__-jLr3\",\"social-info\":\"Footer_social-info__1_9j6\",\"links-container\":\"Footer_links-container__2AMUN\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Product_container__3hbMN\",\"img\":\"Product_img__31ZBX\",\"info\":\"Product_info__IuIRo\",\"name\":\"Product_name__1pTft\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"checkout_main__1vzJp\",\"header\":\"checkout_header__9hc1y\",\"container\":\"checkout_container__1ZaCV\"};"],"sourceRoot":""}